<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>铁柱 | Action</title>
    
    
    <link rel="preload" href="/assets/css/styles.e8b0e64e.css" as="style"><link rel="preload" href="/assets/js/app.e8b0e64e.js" as="script"><link rel="preload" href="/assets/js/17.1730f187.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.e1f7c318.css"><link rel="prefetch" href="/assets/css/2.styles.2dc45e7e.css"><link rel="prefetch" href="/assets/css/3.styles.d0267775.css"><link rel="prefetch" href="/assets/css/4.styles.1d5a0a53.css"><link rel="prefetch" href="/assets/js/1.e1f7c318.js"><link rel="prefetch" href="/assets/js/10.050fbf54.js"><link rel="prefetch" href="/assets/js/11.786fc5df.js"><link rel="prefetch" href="/assets/js/12.ad470848.js"><link rel="prefetch" href="/assets/js/13.fe9d041f.js"><link rel="prefetch" href="/assets/js/14.2e768a1d.js"><link rel="prefetch" href="/assets/js/15.bd6c39cb.js"><link rel="prefetch" href="/assets/js/16.bf2a95a4.js"><link rel="prefetch" href="/assets/js/18.7880fb61.js"><link rel="prefetch" href="/assets/js/19.ec6e2dd8.js"><link rel="prefetch" href="/assets/js/2.2dc45e7e.js"><link rel="prefetch" href="/assets/js/20.f8618ed0.js"><link rel="prefetch" href="/assets/js/21.d052e72d.js"><link rel="prefetch" href="/assets/js/3.d0267775.js"><link rel="prefetch" href="/assets/js/4.1d5a0a53.js"><link rel="prefetch" href="/assets/js/5.751d7d40.js"><link rel="prefetch" href="/assets/js/6.8bcc853c.js"><link rel="prefetch" href="/assets/js/7.b9d8bfa3.js"><link rel="prefetch" href="/assets/js/8.2ec12a8b.js"><link rel="prefetch" href="/assets/js/9.b5c52c70.js">
    <link rel="stylesheet" href="/assets/css/styles.e8b0e64e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="router-link-active"><!----><span class="site-name">
      铁柱
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><div class="dropdown-title"><span class="title">REACT</span><span class="arrow"></span></div><ul class="nav-dropdown"><li class="dropdown-item"><!----><a href="/react/install.html" class="nav-link">react</a></li><li class="dropdown-item"><!----><a href="/redux/init.html" class="nav-link">redux</a></li></ul></div></div><div class="nav-item"><a href="/FN/fn.html" class="nav-link">FN</a></div><div class="nav-item"><a href="/MOCK/mock.html" class="nav-link">MOCK</a></div><div class="nav-item"><a href="/NODE/automatism.html" class="nav-link">NODE</a></div><div class="nav-item"><a href="/NPM/createNpm.html" class="nav-link">NPM</a></div><div class="nav-item"><div class="dropdown-wrapper"><div class="dropdown-title"><span class="title">关于</span><span class="arrow"></span></div><ul class="nav-dropdown"><li class="dropdown-item"><!----><a href="https://github.com/wangjinshen" target="_blank" rel="noopener noreferrer" class="nav-link">github</a></li><li class="dropdown-item"><!----><a href="https://juejin.cn/user/1275089219760797/posts" target="_blank" rel="noopener noreferrer" class="nav-link">掘金</a></li></ul></div></div><!----></nav></div></header><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><div class="dropdown-title"><span class="title">REACT</span><span class="arrow"></span></div><ul class="nav-dropdown"><li class="dropdown-item"><!----><a href="/react/install.html" class="nav-link">react</a></li><li class="dropdown-item"><!----><a href="/redux/init.html" class="nav-link">redux</a></li></ul></div></div><div class="nav-item"><a href="/FN/fn.html" class="nav-link">FN</a></div><div class="nav-item"><a href="/MOCK/mock.html" class="nav-link">MOCK</a></div><div class="nav-item"><a href="/NODE/automatism.html" class="nav-link">NODE</a></div><div class="nav-item"><a href="/NPM/createNpm.html" class="nav-link">NPM</a></div><div class="nav-item"><div class="dropdown-wrapper"><div class="dropdown-title"><span class="title">关于</span><span class="arrow"></span></div><ul class="nav-dropdown"><li class="dropdown-item"><!----><a href="https://github.com/wangjinshen" target="_blank" rel="noopener noreferrer" class="nav-link">github</a></li><li class="dropdown-item"><!----><a href="https://juejin.cn/user/1275089219760797/posts" target="_blank" rel="noopener noreferrer" class="nav-link">掘金</a></li></ul></div></div><!----></nav><ul class="sidebar-links"><li><a href="/redux/init.html" class="sidebar-link">介绍</a></li><li><a href="/redux/action.html" class="active sidebar-link">Action</a></li><li><a href="/redux/react-redux.html" class="sidebar-link">react-redux</a></li><li><a href="/redux/reducer.html" class="sidebar-link">Reducer</a></li><li><a href="/redux/store.html" class="sidebar-link">Store</a></li></ul></div><div class="page"><div class="content"><h1 id="action"><a href="#action" aria-hidden="true" class="header-anchor">#</a> Action</h1><p>Action 是把数据从应用传到 store 的有效载荷。
<strong>它是 store 数据的唯一来源。</strong>
一般来说你会通过 store.dispatch() 将 action 传到 store。</p><pre class="language-js"><code>    <span class="token keyword">const</span> <span class="token constant">ADD_TODO</span> <span class="token operator">=</span> <span class="token string">'ADD_TODO'</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token constant">ADD_TODO</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'Build my first Redux app'</span>
    <span class="token punctuation">}</span>
</code></pre><p>Action 本质上是 JavaScript 普通对象。我们约定，action 内必须使用一个字符串类型的 type 字段来表示将要执行的动作。多数情况下，type 会被定义成字符串常量。当应用规模越来越大时，建议使用单独的模块或文件来存放 action。</p><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">PLUS</span><span class="token punctuation">,</span> <span class="token constant">MINUS</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/action'</span>
</code></pre><p>除了 type 字段外，action 对象的结构完全由你自己决定。参照 Flux 标准 Action 获取关于如何构造 action 的建议。</p><p>这时，我们还需要再添加一个 action index 来表示用户完成任务的动作序列号。因为数据是存放在数组中的，所以我们通过下标 index 来引用特定的任务。而实际项目中一般会在新建数据的时候生成唯一的 ID 作为数据的引用标识。</p><pre class="language-js"><code>    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;PLUS&quot;</span><span class="token punctuation">,</span>
      index<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
</code></pre><p>我们应该尽量减少在 action 中传递的数据。比如上面的例子，传递 index 就比把整个任务对象传过去要好。</p><p>最后，再添加一个 action type 来表示当前的任务展示选项。</p><pre class="language-js"><code>    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token constant">SET_VISIBILITY_FILTER</span><span class="token punctuation">,</span>
      filter<span class="token operator">:</span> <span class="token constant">SHOW_COMPLETED</span>
    <span class="token punctuation">}</span>
</code></pre><h1 id="发起action"><a href="#发起action" aria-hidden="true" class="header-anchor">#</a> 发起Action</h1><p>通过 dispatch()来发起一个Action, 接受一个对象，对象中有 type,payload</p><pre class="language-js"><code> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> type<span class="token operator">:</span><span class="token string">&quot;PLUS&quot;</span><span class="token punctuation">,</span>payload<span class="token operator">:</span><span class="token punctuation">[</span>something<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/redux/init.html" class="prev">
          介绍
        </a></span><span class="next"><a href="/redux/react-redux.html">
          react-redux
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/app.e8b0e64e.js" defer></script><script src="/assets/js/17.1730f187.js" defer></script>
  </body>
</html>
